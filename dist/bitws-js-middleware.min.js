/*! bitws-js-middleware 07-05-2016 */
var Swagger=require("swagger-client"),bitwsjs=require("bitws-js");module.exports=function(a,b,c){module.url=a,module.key=b,module.key||(module.key=new bitwsjs.bitcore.PrivateKey);var d=function(a){this.key=a};return d.prototype.apply=function(a,b){var c=bitwsjs.signSerialize(module.url,a.data,this.key,null);return a.headers.signature=c,console.log("Signing request ",a),!0},module.client=new Swagger({url:module.url,port:3666,success:function(){console.log("bitws-js-middleware initiated"),c&&c(!0)},error:function(a){console.log("bitws-js-middleware error on init: "+a.statusText),c&&c(!0)},authorizations:{bitws:new d(module.key)}}),module};